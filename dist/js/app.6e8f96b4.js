(function(e){function t(t){for(var s,i,o=t[0],l=t[1],c=t[2],m=0,p=[];m<o.length;m++)i=o[m],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],s=!0,o=1;o<r.length;o++){var l=r[o];0!==a[l]&&(s=!1)}s&&(n.splice(t--,1),e=i(i.s=r[0]))}return e}var s={},a={app:0},n=[];function i(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=s,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var s=r("85ec"),a=r.n(s);a.a},"13fe":function(e,t,r){"use strict";var s=r("4437"),a=r.n(s);a.a},"22db":function(e,t,r){},"2ab2":function(e,t,r){},"2c81":function(e,t,r){e.exports=r.p+"img/404.6c1354e6.jpg"},"38b0":function(e,t,r){"use strict";var s=r("c6c2"),a=r.n(s);a.a},4437:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},n=[],i=(r("b64b"),r("498a"),r("bf2d")),o=r("04e1"),l=r.n(o),c={name:"app",components:{},created:function(){if(localStorage.eleToken){var e=l()(localStorage.eleToken);this.$store.dispatch("setAuthenticated",!this.isEmpty(e)),this.$store.dispatch("setUser",e)}},methods:{isEmpty:function(e){return void 0===e||null===e||"object"===Object(i["a"])(e)&&0===Object.keys(e).lenth||"string"===typeof e&&0===e.trim().length}}},u=c,m=(r("034f"),r("2877")),p=Object(m["a"])(u,a,n,!1,null,null,null),f=p.exports,d=r("8c4f"),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"index"},[r("HeadNav"),r("LeftMenu"),r("router-view")],1)},h=[],v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"head-nav"},[s("el-row",[s("el-col",{staticClass:"logo-container",attrs:{span:6}},[s("img",{staticClass:"logo",attrs:{src:r("b640"),alt:""}}),s("span",{staticClass:"title"},[e._v("宠物医院在线后台管理系统")])]),s("el-col",{staticClass:"user",attrs:{span:6}},[s("div",{staticClass:"userinfo"},[s("img",{staticClass:"avartar",attrs:{src:e.user.avatar,alt:""}}),s("div",{staticClass:"welcome"},[s("p",{staticClass:"name"},[e._v("欢迎")]),s("p",{staticClass:"name avartarname"},[e._v(e._s(e.user.name))])]),s("span",{staticClass:"username"},[s("el-dropdown",{attrs:{trigger:"click"},on:{command:e.setDialogInfo}},[s("span",{staticClass:"el-dropdown-link"},[s("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"info"}},[e._v("个人信息")]),s("el-dropdown-item",{attrs:{command:"logout"}},[e._v("退出")])],1)],1)],1)])])],1)],1)},b=[],_={name:"head-nav",computed:{user:function(){return this.$store.getters.user}},methods:{setDialogInfo:function(e){switch(e){case"info":this.showInfoList();break;case"logout":this.logout();break}},showInfoList:function(){console.log("个人信息")},logout:function(){localStorage.removeItem("eleToken"),this.$store.dispatch("clearCurrentState"),this.$router.push("./login")}}},w=_,y=(r("de47"),Object(m["a"])(w,v,b,!1,null,"102b96b7",null)),x=y.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{staticClass:"menu_page"},[r("el-col",[r("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{mode:"vertical","background-color":"#324057","text-color":"#fff","active-text-color":"#409eff"}},[r("router-link",{attrs:{to:"/home"}},[r("el-menu-item",{attrs:{index:"0"}},[r("i",{staticClass:"fa fa-margin fa-server"}),r("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])])],1),e._l(e.items,(function(t){return[t.children?r("el-submenu",{key:t.path,attrs:{index:t.path}},[r("template",{slot:"title"},[r("i",{class:"fa fa-margin "+t.icon}),r("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])]),e._l(t.children,(function(t,s){return r("router-link",{key:s,attrs:{to:t.path}},[r("el-menu-item",{attrs:{index:t.path}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])],1)}))],2):e._e()]}))],2)],1)],1)},E=[],U={name:"left-menu",data:function(){return{items:[{name:"宠物信息",path:"pets",children:[{path:"pets",name:"宠物信息管理"}]},{name:"资金管理",path:"fund",children:[{path:"fundlist",name:"资金流水"}]},{name:"开药处方管理",path:"medicine",children:[{path:"medicine",name:"用药处方"}]},{name:"住院信息管理",path:"takec",children:[{path:"takecare",name:"住院信息"}]},{name:"化验信息管理",path:"assay",children:[{path:"assay",name:"化验信息"}]},{name:"B超信息管理",path:"xlignt",children:[{path:"xlight",name:"化验信息"}]},{name:"信息管理",path:"info",children:[{path:"infoshow",name:"个人信息"}]}]}}},k=U,T=(r("6902"),Object(m["a"])(k,C,E,!1,null,"27ef5a6a",null)),$=T.exports,j={name:"index",components:{HeadNav:x,LeftMenu:$}},S=j,O=(r("8fc1"),Object(m["a"])(S,g,h,!1,null,null,null)),A=O.exports,I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register"},[r("section",{staticClass:"form_container"},[r("div",{staticClass:"manage_tip"},[r("span",{staticClass:"title"},[e._v("米修在线后台管理系统")]),r("el-form",{ref:"registerForm",staticClass:"registerForm",attrs:{model:e.registerUser,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.registerUser.name,callback:function(t){e.$set(e.registerUser,"name",t)},expression:"registerUser.name"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.registerUser.email,callback:function(t){e.$set(e.registerUser,"email",t)},expression:"registerUser.email"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.registerUser.password,callback:function(t){e.$set(e.registerUser,"password",t)},expression:"registerUser.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"password2"}},[r("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.registerUser.password2,callback:function(t){e.$set(e.registerUser,"password2",t)},expression:"registerUser.password2"}})],1),r("el-form-item",{attrs:{label:"选择身份"}},[r("el-select",{attrs:{placeholder:"请选择身份"},model:{value:e.registerUser.identity,callback:function(t){e.$set(e.registerUser,"identity",t)},expression:"registerUser.identity"}},[r("el-option",{attrs:{lable:"管理员",value:"manager"}}),r("el-option",{attrs:{lable:"员工",value:"employee"}})],1)],1),r("el-form-item",[r("el-button",{staticClass:"submit_btn",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("registerForm")}}},[e._v("注册")])],1)],1)],1)])])},F=[],P={name:"register",components:{},data:function(){var e=this,t=function(t,r,s){r!==e.registerUser.password?s(new Error("两次输入密码不一致!")):s()};return{registerUser:{name:"",email:"",password:"",password2:"",identity:""},rules:{name:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:2,max:30,message:"长度必须在2到30之间",trigger:"blur"}],email:[{type:"email",required:!0,message:"邮箱格式不正确",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在6到30之间",trigger:"blur"}],password2:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在6到30之间",trigger:"blur"},{validator:t,trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.$axios.post("/api/users/register",t.registerUser).then((function(e){t.$message({message:"账号注册成功",type:"success"})})),t.$router.push("/login"))}))}}},M=P,q=(r("8053"),Object(m["a"])(M,I,F,!1,null,"6d3e1460",null)),D=q.exports,H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("section",{staticClass:"form_container"},[r("div",{staticClass:"manage_tip"},[r("span",{staticClass:"title"},[e._v("米修在线后台管理系统")]),r("el-form",{ref:"loginForm",staticClass:"loginForm",attrs:{model:e.loginUser,rules:e.rules,"label-width":"60px"}},[r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.loginUser.email,callback:function(t){e.$set(e.loginUser,"email",t)},expression:"loginUser.email"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.loginUser.password,callback:function(t){e.$set(e.loginUser,"password",t)},expression:"loginUser.password"}})],1),r("el-form-item",[r("el-button",{staticClass:"submit_btn",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("loginForm")}}},[e._v("登录")])],1),r("div",{staticClass:"tiparea"},[r("p",[e._v("还没有账号？现在"),r("router-link",{attrs:{to:"./register"}},[e._v("注册")])],1)])],1)],1)])])},N=[],L={name:"login",components:{},data:function(){return{loginUser:{email:"",password:""},rules:{email:[{type:"email",required:!0,message:"邮箱格式不正确",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在6到30之间",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.$axios.post("/api/users/login",t.loginUser).then((function(e){var r=e.data.token;localStorage.setItem("eleToken",r);var s=l()(r);t.$store.dispatch("setAuthenticated",!t.isEmpty(s)),t.$store.dispatch("setUser",s),t.$router.push("/index")}))}))},isEmpty:function(e){return void 0===e||null===e||"object"===Object(i["a"])(e)&&0===Object.keys(e).lenth||"string"===typeof e&&0===e.trim().length}}},R=L,J=(r("f277"),Object(m["a"])(R,H,N,!1,null,"2922f52c",null)),z=J.exports,B=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},G=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"notfound"},[s("img",{attrs:{src:r("2c81"),alt:""}})])}],K=(r("38b0"),{}),Q=Object(m["a"])(K,B,G,!1,null,"87c570d4",null),V=Q.exports,W=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},X=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"notfound"},[s("img",{attrs:{src:r("2c81"),alt:""}})])}],Y=(r("f08f"),{}),Z=Object(m["a"])(Y,W,X,!1,null,"37f688e1",null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"infoshow"},[r("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"user"},[r("img",{staticClass:"avatar",attrs:{src:e.user.avatar,alt:""}})])]),r("el-col",{attrs:{span:16}},[r("div",{staticClass:"userinfo"},[r("div",{staticClass:"user-item"},[r("i",{staticClass:"fa fa-user"}),r("span",[e._v(e._s(e.user.name))])]),r("div",{staticClass:"user-item"},[r("i",{staticClass:"fa fa-cog"}),r("span",[e._v(e._s("manager"==e.user.identity?"管理员":"普通员工"))])])])])],1)],1)},re=[],se={name:"infoshow",computed:{user:function(){return this.$store.getters.user}}},ae=se,ne=(r("13fe"),Object(m["a"])(ae,te,re,!1,null,"4620e969",null)),ie=ne.exports;s["default"].use(d["a"]);var oe=[{path:"/",redirect:"/index"},{path:"/index",name:"index",component:A,children:[{path:"",component:ee},{path:"/home",name:"home",component:ee},{path:"/infoshow",name:"infoshow",component:ie}]},{path:"/register",name:"register",component:D},{path:"/login",name:"login",component:z},{path:"*",name:"/404",component:V}],le=new d["a"]({mode:"history",base:"/",routes:oe});le.beforeEach((function(e,t,r){var s=!!localStorage.eleToken;"/login"==e.path||"/register"==e.path?r():s?r():r("/login")}));var ce,ue=le,me=r("2fa7"),pe=r("2f62");s["default"].use(pe["a"]);var fe,de={SET_AUTHENTICATED:"SET_AUTHENTICATED",SET_USER:"SET_USER"},ge={isAuthenticated:!1,user:{}},he={isAuthenticated:function(e){return e.isAuthenticated},user:function(e){return e.user}},ve=(ce={},Object(me["a"])(ce,de.SET_AUTHENTICATED,(function(e,t){e.isAuthenticated=t||!1})),Object(me["a"])(ce,de.SET_USER,(function(e,t){e.user=t||{}})),ce),be={setAuthenticated:function(e,t){var r=e.commit;r(de.SET_AUTHENTICATED,t)},setUser:function(e,t){var r=e.commit;r(de.SET_USER,t)},clearCurrentState:function(e){var t=e.commit;t(de.SET_AUTHENTICATED,!1),t(de.SET_USER,null)}},_e=new pe["a"].Store({state:ge,getters:he,mutations:ve,actions:be}),we=r("5c96"),ye=r.n(we),xe=(r("0fae"),r("d3b7"),r("bc3a")),Ce=r.n(xe);function Ee(){fe=we["Loading"].service({lock:!0,text:"拼命加载中...",background:"rgba(0,0,0,0.7)"})}function Ue(){fe.close()}Ce.a.interceptors.request.use((function(e){return Ee(),localStorage.eleToken&&(e.headers.Authorization=localStorage.eleToken),e}),(function(e){return Promise.reject(e)})),Ce.a.interceptors.response.use((function(e){return Ue(),e}),(function(e){Ue(),we["Message"].error(e.response.data);var t=e.response.status;return 401==t&&(we["Message"].error("token失效，请重新登陆！"),localStorage.removeItem("eleToken"),ue.push("/login")),Promise.reject(e)}));var ke=Ce.a,Te=r("a7fe"),$e=r.n(Te);s["default"].config.productionTip=!1,s["default"].use(ye.a),s["default"].prototype.$axios=ke,s["default"].use($e.a,ke),new s["default"]({router:ue,store:_e,render:function(e){return e(f)}}).$mount("#app")},6902:function(e,t,r){"use strict";var s=r("2ab2"),a=r.n(s);a.a},"74bd":function(e,t,r){},8053:function(e,t,r){"use strict";var s=r("ade5"),a=r.n(s);a.a},"85ec":function(e,t,r){},"8fc1":function(e,t,r){"use strict";var s=r("9272"),a=r.n(s);a.a},9272:function(e,t,r){},ade5:function(e,t,r){},b196:function(e,t,r){},b640:function(e,t,r){e.exports=r.p+"img/logo.af655123.jpg"},c6c2:function(e,t,r){},de47:function(e,t,r){"use strict";var s=r("74bd"),a=r.n(s);a.a},f08f:function(e,t,r){"use strict";var s=r("b196"),a=r.n(s);a.a},f277:function(e,t,r){"use strict";var s=r("22db"),a=r.n(s);a.a}});
//# sourceMappingURL=app.6e8f96b4.js.map